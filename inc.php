<?php
// inc.php — minimal i18n helper (default Swedish)
if (session_status() === PHP_SESSION_NONE) session_start();
if (isset($_GET['lang'])) { $_SESSION['lang'] = ($_GET['lang'] === 'en') ? 'en' : 'sv'; }
if (empty($_SESSION['lang'])) { $_SESSION['lang'] = 'sv'; }

$TR = [
  'sv' => [
    'app_title' => 'Secret Santa',
    'login_title' => 'Logga in',
    'login_sub' => 'Logga in som admin eller deltagare.',
    'username' => 'Användarnamn',
    'password' => 'Lösenord',
    'login' => 'Logga in',
    'new_here' => 'Ny användare? Be admin skapa ett konto.',
    'logout' => 'Logga ut',
    'admin_panel' => 'Adminpanel',
    'manage_participants' => 'Hantera deltagare och skapa namngivna dragningar.',
    'add_user' => 'Lägg till användare',
    'password_optional' => 'Lösenord (lämna tomt för slumpat)',
    'users' => 'Användare',
    'action' => 'Åtgärd',
    'delete' => 'Radera',
    'change_password' => 'Byt lösenord',
    'create_draw' => 'Skapa dragning',
    'draw_name' => 'Namn på dragning',
    'run_draw' => 'Kör dragning',
    'select_participants' => 'Välj deltagare',
    'select_all' => 'Markera alla',
    'existing_draws' => 'Befintliga dragningar',
    'name' => 'Namn',
    'participants' => 'Deltagare',
    'active' => 'Aktiv',
    'actions' => 'Åtgärder',
    'set_active' => 'Aktivera',
    'archive' => 'Arkivera',
    'delete_draw' => 'Radera',
    'tip_draws' => 'Tips: Skapa flera namngivna dragningar som "2025", "2026". Admin kan byta aktiv eller radera.',
    'current_status' => 'Aktuell status',
    'status_sub' => 'Resultat, intressen och inköpt-status för aktiv dragning.',
    'no_active_draw' => 'Ingen aktiv dragning vald.',
    'user' => 'Användare',
    'assigned_recipient' => 'Tilldelad mottagare',
    'interests' => 'Intressen / Hobbys',
    'purchased' => 'Inköpt',
    'hello' => 'Hej',
    'current_draw' => 'Aktuell dragning',
    'your_match' => 'Din mottagare',
    'no_draw_yet' => 'Ingen aktiv dragning ännu. Titta tillbaka senare.',
    'not_in_draw' => 'Du är inte med i den aktiva dragningen.',
    'your_interests' => 'Dina intressen / hobbys (tips till din Secret Santa)',
    'ive_purchased' => 'Jag har köpt min present',
    'save' => 'Spara',
    'past_draws' => 'Tidigare dragningar',
    'recipient_interests' => 'Mottagarens intressen / hobbys',
    'purchased_q' => 'Inköpt?',
    'welcome' => 'Välkommen',
    'setup_title' => 'Skapa admin-konto',
    'setup_sub' => 'Detta är första gången du besöker denna sida. Skapa ditt admin-konto för att komma igång.',
    'create_admin' => 'Skapa admin-konto',
    'password_confirm' => 'Bekräfta lösenord',
    'admin_username_hint' => 'Admin-användarnamnet är fastställt som "admin"',
    'hey' => 'HEJ',
    'current_active_drawing' => 'Hemlig tomte',
    'your_chosen_giftee' => 'Din utvalda mottagare',
    'this_persons_hobbies' => 'Denna persons intressen och hobbys',
    'gift_inspiration' => 'Här är lite inspiration för ditt köp. Detta är vad %s har sagt om sina intressen och hobbys:',
    'no_interests_yet' => '%s har inte angett några intressen ännu.',
    'your_interests_help' => 'Hjälp din Secret Santa med några idéer! Berätta gärna mer om dina intressen och hobbys. Allt hjälper!',
    'gift_status' => 'Presentstatus',
    'not_purchased_yet' => 'Inte köpt ännu',
    'purchased_status' => 'Köpt',
    'budget' => 'Budget',
    'max_cost' => 'Maximal kostnad',
    'deadline' => 'Deadline',
    'gift_deadline' => 'Presentdeadline',
    'budget_info' => 'Budget: %s',
    'deadline_info' => 'Deadline: %s',
    'days_left' => '%d dagar kvar',
    'day_left' => '1 dag kvar',
    'today' => 'Idag'
  ],
  'en' => [
    'app_title' => 'Secret Santa',
    'login_title' => 'Log in',
    'login_sub' => 'Log in as admin or participant.',
    'username' => 'Username',
    'password' => 'Password',
    'login' => 'Log In',
    'new_here' => 'New here? Ask admin to create your account.',
    'logout' => 'Log out',
    'admin_panel' => 'Admin Panel',
    'manage_participants' => 'Manage participants and create named draws.',
    'add_user' => 'Add User',
    'password_optional' => 'Password (leave blank for random)',
    'users' => 'Users',
    'action' => 'Action',
    'delete' => 'Delete',
    'change_password' => 'Change Password',
    'create_draw' => 'Create Draw',
    'draw_name' => 'Draw name',
    'run_draw' => 'Run Draw',
    'select_participants' => 'Select participants',
    'select_all' => 'Select all',
    'existing_draws' => 'Existing Draws',
    'name' => 'Name',
    'participants' => 'Participants',
    'active' => 'Active',
    'actions' => 'Actions',
    'set_active' => 'Set Active',
    'archive' => 'Archive',
    'delete_draw' => 'Delete',
    'tip_draws' => 'Tip: Create named draws like "2025", "2026". Admin can switch active or delete.',
    'current_status' => 'Current Status',
    'status_sub' => 'Active draw results with interests and purchase status.',
    'no_active_draw' => 'No active draw selected.',
    'user' => 'User',
    'assigned_recipient' => 'Assigned Recipient',
    'interests' => 'Interests / Hobbies',
    'purchased' => 'Purchased',
    'hello' => 'Hello',
    'current_draw' => 'Current draw',
    'your_match' => 'Your match',
    'no_draw_yet' => 'No active draw yet. Please check back later.',
    'not_in_draw' => 'You are not part of the active draw.',
    'your_interests' => 'Your interests / hobbies (tips for your Secret Santa)',
    'ive_purchased' => 'I’ve purchased my gift',
    'save' => 'Save',
    'past_draws' => 'Past Draws',
    'recipient_interests' => 'Recipient interests / hobbies',
    'purchased_q' => 'Purchased?',
    'welcome' => 'Welcome',
    'setup_title' => 'Create Admin Account',
    'setup_sub' => 'This is your first visit. Create your admin account to get started.',
    'create_admin' => 'Create Admin Account',
    'password_confirm' => 'Confirm Password',
    'admin_username_hint' => 'Admin username is fixed as "admin"',
    'hey' => 'HEY',
    'current_active_drawing' => 'Secret Santa',
    'your_chosen_giftee' => 'Your Chosen Giftee',
    'this_persons_hobbies' => 'This Person\'s Hobbies or Interests',
    'gift_inspiration' => 'Here\'s some inspiration for your purchase. This is what %s said about their hobbies and interests:',
    'no_interests_yet' => '%s hasn\'t provided any interests yet.',
    'your_interests_help' => 'Please help your Secret Santa with some ideas! Tell us more about your hobbies and interests. Anything helps!',
    'gift_status' => 'Gift Status',
    'not_purchased_yet' => 'Not Purchased Yet',
    'purchased_status' => 'Purchased',
    'budget' => 'Budget',
    'max_cost' => 'Maximum Cost',
    'deadline' => 'Deadline',
    'gift_deadline' => 'Gift Deadline',
    'budget_info' => 'Budget: %s',
    'deadline_info' => 'Deadline: %s',
    'days_left' => '%d days left',
    'day_left' => '1 day left',
    'today' => 'Today'
  ]
];

function lang() { return $_SESSION['lang'] ?? 'sv'; }
function t($key) { global $TR; $l = lang(); return $TR[$l][$key] ?? ($TR['en'][$key] ?? $key); }

